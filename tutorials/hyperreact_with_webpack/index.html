<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="google-site-verification" content="qjqVOvRhHfsuDbLOvaAnj2mkUZJ9Xwzg84TMVXduvUc" />

    <meta charset="UTF-8">
    <title>Hyperloop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>


    <!-- Opal and Hyperloop -->
    <script src="http://cdn.opalrb.org/opal/current/opal.min.js"></script>
    <script src="https://rawgit.com/ruby-hyperloop/hyperloop-js/master/dist/opal.min.js"></script>
    <script src="https://rawgit.com/ruby-hyperloop/hyperloop-js/master/dist/hyperloop.min.js"></script>
    <script src="https://rawgit.com/ruby-hyperloop/hyperloop-js/master/dist/hyperloop-compiler.min.js"></script>


    <!-- If you want local copies... -->
    <!-- <script src="../../javascripts/opal-compiler.js"></script> -->
    <!-- <script src="../../javascripts/hyperloop.js"></script> -->

    <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>

    <script src="../../javascripts/bootstrap.min.js"></script>
    <script src="../../javascripts/codemirror.js"></script>
    <script src="../../javascripts/ruby.js"></script>
    <script src="../../javascripts/matchbrackets.js"></script>
    <script src="../../javascripts/react_player.js"></script>
    <script src="../../javascripts/highlight.pack.js"></script>


    <!-- Components are compiled by Hyperloop Express -->
    <script type="text/ruby">

class CodeMirror < Hyperloop::Component
  param :code, type: String
  param :heading, default: "Code"
  param :rows, type: Integer, default: 0
  param :top_level_component, type: String

  before_mount do
    r=rand(2**256).to_s(36)[0..7]
    @div_code = "code_#{r}"
    @div_result = "result_#{r}"
  end

  after_mount do
  # puts params.code
    @editor = `CodeMirror(document.getElementById(#{@div_code}), {
      value: #{params.code.to_s},
      mode: 'text/x-ruby',
      matchBrackets: true,
      lineNumbers: false,
      indentUnit: 2,
      theme: 'github'
    });`

    `#{@editor}.on('change', #{lambda {on_change} })`
    `#{@editor}.setSize(null, #{@editor}.defaultTextHeight()*#{params.rows})` unless params.rows == 0
    execute_code
  end

  render(DIV) do
    div.card {
      div.card_header { params.heading }
      div(id: @div_code)
      div.card_header do
        img(src: '../../images/hyperloop-logo-small-white.png' , width:'25')
        span { ' ' }
        'Live editor results'
      end
      div.card_block(id: @div_result)
    }
  end

  def on_change
    execute_code
  end

  def execute_code
    begin
      code = `#{@editor}.getValue()`
      # puts code
      code += "\nElement['##{@div_result}'].render(#{params.top_level_component})"
      compiled_code = Opal::Compiler.new(code).compile

      `ReactDOM.unmountComponentAtNode(document.getElementById(#{@div_result}));`

      # Dispatchers and Receivers example works but Steps example breaks
      # Hyperloop::Context.reset!
      # `eval(#{compiled_code})`
      # Hyperloop::Application::Boot.run()

      # Steps example works but Dispatchers and Receivers example breaks
      `eval(#{compiled_code})`
      Hyperloop::Context.reset!
      Hyperloop::Application::Boot.run()

      component = Module.const_get params.top_level_component
      # we need to see if the component is valid - try checking if it can render static markup
      # the following line generates: `undefined method to_n for SimpleComponent`
      # if React.render_to_static_markup( component ).empty?
      #   invalid_component_message
      # end
    rescue Exception => e
      @time_out = after(0.1) do
        unable_to_compile_message e.message
      end
    end
  end

  def invalid_component_message
    message = div.text_danger do
      h3.text_danger {"Oops, invalid Component..."}
      p { "Your Component has been rejected by React. A valid Component must have a render macro and return just one HTML element." }
    end
    Element["##{@div_result}"].render{ message }
  end

  def unable_to_compile_message reason
    message = div.text_danger do
      h3.text_danger {"Can't compile..."}
      p { reason }
    end
    Element["##{@div_result}"].render{ message }
  end

end

</script>

    <script type="text/ruby">

Document.ready? do
   Element.find('div.codemirror-live-edit').each do |mount_point|
     heading = mount_point.attr('data-heading')
     rows = mount_point.attr('data-rows')
     top_level_component = mount_point.attr('data-top-level-component')
     code = Element[mount_point].find('pre').text.strip
     params = {code: code, top_level_component: top_level_component}
     params = params.merge({heading: heading}) if heading
     params = params.merge({rows: rows.to_i}) if rows
     codemirror_component = Object.const_get('CodeMirror')
     React.render(React.create_element(codemirror_component, params ), mount_point)
   end
end

</script>


    <script type="text/ruby">

class ToggleCodemirror < Hyperloop::Component
  param :code, type: String
  param :heading, default: "Code"
  param :rows, type: Integer, default: 0
  param :top_level_component, type: String
  param :show_code

  before_mount do
    r=rand(2**256).to_s(36)[0..7]
    @div_code = "code_#{r}"
    @div_result = "result_#{r}"
  end

  after_mount do
  # puts params.code
    @editor = `CodeMirror(document.getElementById(#{@div_code}), {
      value: #{params.code.to_s},
      mode: 'text/x-ruby',
      matchBrackets: true,
      lineNumbers: false,
      indentUnit: 2,
      readOnly: true,
      theme: 'github'
    });`

    `#{@editor}.setSize(null, #{@editor}.defaultTextHeight()*#{params.rows})` unless params.rows == 0

    Element['.codediv'].hide('')
    mutate.show_code false
    
  end

  render(DIV) do
    div.card {
      div.card_header do
        div(class: 'row') do
          div(class: 'col-md-6') do
            img(src: '../../images/hyperloop-logo-small-white.png' , width:'25') 
            span { ' ' }
            span { params.heading }
          end
          div(class: 'col-md-6 align-right') do

            toggle_link
          end
        end
      end

      div(id: @div_code, class: 'codediv') 
    }
  end

  def toggle_link
    
      BUTTON(class: 'btn btn-info btn-sm') do
        state.show_code ? "Click to hide code" : "Click to show code"
      end.on(:click) do |ev|
        mutate.show_code !state.show_code 
        state.show_code ? Element["##{@div_code}"].show('') : Element["##{@div_code}"].hide('')
      end
    
  end

 
end

</script>

    <script type="text/ruby">

Document.ready? do
    Element.find('div.togglecode').each do |mount_point|
        heading = mount_point.attr('data-heading')
        rows = mount_point.attr('data-rows')
        top_level_component = mount_point.attr('data-top-level-component')
        code = Element[mount_point].find('pre').text.strip
        params = {code: code, top_level_component: top_level_component}
        params = params.merge({heading: heading}) if heading
        params = params.merge({rows: rows.to_i}) if rows
        codemirror_component = Object.const_get('ToggleCodemirror')
        React.render(React.create_element(codemirror_component, params ), mount_point)
    end
end

</script>

    <link href="../../stylesheets/bootstrap.min.css" rel="stylesheet" />
    <link href="../../stylesheets/typography.css" rel="stylesheet" />
    <link href="../../stylesheets/override.css" rel="stylesheet" />
    <link href="../../stylesheets/divtable.css" rel="stylesheet" />
    <!-- <link href="../../stylesheets/code.css" rel="stylesheet" /> -->
    <link href="../../stylesheets/github.css" rel="stylesheet" />
    <link href="../../stylesheets/highlighting.css" rel="stylesheet" />
    <link href="../../stylesheets/codemirror.css" rel="stylesheet" />
    <link href="../../stylesheets/monokai-sublime.css" rel="stylesheet" />

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />

    <!-- Favicons -->

    <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="../../images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../images/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/manifest.json">
    <link rel="mask-icon" href="../../images/safari-pinned-tab.svg" color="#e81176">
    <meta name="theme-color" content="#ffffff">

  </head>

  <body>
    <div class="navbarbackgroundcolor">
      <div class="container">
        <nav class="navbar navbar-ligh">
  <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2" aria-controls="exCollapsingNavbar2" aria-expanded="false" aria-label="Toggle navigation">
    &#9776;
  </button>
  <div class="collapse navbar-toggleable-xs" id="exCollapsingNavbar2">
    <ul class="nav navbar-nav">
      <li class="nav-item">
        <a href="/" class="nav-link"><span class='navfirstletter'>H</span>yperloop</a>
      </li>
      <li class="nav-item">
        <a href="/start/components" class="nav-link active"><span class='navfirstletter'>S</span>tart</a>
      </li>
      <li class="nav-item">
        <a href="/installation" class="nav-link"><span class='navfirstletter'>I</span>nstallation</a>
      </li>
      <li class="nav-item">
        <a href="/tutorials" class="nav-link"><span class='navfirstletter'>T</span>utorials</a>
      </li>
      <li class="nav-item">
        <a href="/gems" class="nav-link"><span class='navfirstletter'>G</span>ems</a>
      </li>
      <li class="nav-item">
        <a href="https://github.com/ruby-hyperloop" class="nav-link"><span class='navfirstletter'>G</span>ithub</a>
      </li>
      <li class="nav-item">
        <a href="/tools" class="nav-link"><span class='navfirstletter'>T</span>ools</a>
      </li>
      <li class="nav-item">
        <a href="/docs/architecture" class="nav-link"><span class='navfirstletter'>D</span>ocs</a>
      </li>
      <li class="nav-item">
        <a href="/help" class="nav-link"><span class='navfirstletter'>H</span>elp</a>
      </li>
      <li class="nav-item">
        <a href="/blog" class="nav-link"><span class='navfirstletter'>B</span>log</a>
      </li>
      <!-- <li class="nav-item">
        <input type="text" name="search" />
      </li> -->
    </ul>
  </div>
</nav>

      </div>
    </div>





    <div class="jumbotron page-header">
      <div class="container">

        <div class="row hidden-sm-down">
          <div class="col-md-2">
            <div class="hyperlooplogo">
            </div>
          </div>
          <div class="col-md-8">

            <h1 class="display-4 project-name">Hyperloop</h1>

            <h4 class="display-7 project-tagline">

              Tutorials, screencasts & videos
            </h4>
          </div>

        </div>

        <div class="row hidden-md-up">
          <div class="col-md-3">
            <div class="hyperlooplogo">
            </div>
          </div>
          <div class="col-md-9">
            <h1 class="h1 project-name center-text">Hyperloop</h1>
            </br>
            <h2 class="h5 project-tagline center-text">
              Tutorials, screencasts & videos
            </h2>
          </div>

        </div>


      </div>
    </div>

    <div class="page-header-underline">
      <div class="container">

      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-3 sidenavcol">
            <ul class="nav">

    <li class="nav-item"><strong><a href="/tutorials/hyperloopcomps">Hyperloop COMPS</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperloopcomps/compstoreop-first">Simple COMPS App</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/hyperloopjs">Hyperloop.js</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperloopjs/helloworld">Hello World</a></li>
      <li class="nav-item"><a href="/tutorials/hyperloopjs/chatapp">Chat App</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/hyperlooprails">Hyperloop and Rails</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperlooprails/helloworld">Hello World</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/todo-tutorial">Todo MVC</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/chatapp">Chat App</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/hyperloop-devise-tutorial">Devise</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/eventsplanner">Events planner</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/fivelettergame">Five letter word game</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/cloud9">Hyperloop and Cloud9</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/webpack">NPM and Webpack</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/hyperloop-rails-webpackergem-helloworld">Webpacker GEM</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/opalhotreloader">Opal Hot Reloader</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/productionmode">Production mode</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/hyperloopdeploy">Hyperloop deployment</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperloopdeploy/deployvps">Deploying on VPS</a></li>
      <li class="nav-item"><a href="/tutorials/hyperloopdeploy/deployheroku">Deploying on Heroku</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/opal">Opal</a></strong></li>
    <br>
    <li class="nav-item"><strong><a href="/tutorials/videos">Videos</a></strong></li>

  </ul>


          <br>
        </div>
        <div class="col-md-9 main-content">
          <h1 id="hyperreact-npm-and-webpack">HyperReact, NPM and Webpack</h1>

<h2 id="overview-and-prerequisites">Overview and prerequisites</h2>

<p>In an Isomorphic Ruby world, we need a good way of including Ruby and JavaScript components so they co-exist and play nicely together.</p>

<p>Most Ruby libraries are distributed as Gems whereas (these days) most Javascript components are distributed through NPM. Webpack co-exists well with Rails and the combination of Rails, Yarn, Sprockets and Webpack looks like it might become a standard within the Rails community.</p>

<p>This tutorial will take you through <a href="#setup">Setup</a> of NPM and Webpack, <a href="#usage">Usage</a> instructions for adding new components and then give an <a href="#example">Example</a> of adding and using a JavaScript component in a HyperReact project.</p>

<p>This tutorial assumes that NPM is installed. Please see the <a href="https://www.npmjs.com/">NPM website</a> for installation instructions.</p>

<p>Additionally, this tutorial starts with an existing Rails app with <strong>HyperReact already setup and working</strong>. For more information on how to get to that stage, please see the <a href="http://ruby-hyperloop.org/tutorials/hyperreact_with_rails/">HyperReact and Rails Tutorial</a>.</p>

<p>The source of this tutorial is avaiable as a <a href="https://github.com/ruby-hyperloop/quickstart">Quickstart</a> which you can clone.</p>

<h2 id="setup">Setup</h2>

<p>If you have completed the prerequisites above, let&#39;s get started - there are 5 steps to this process:</p>

<ol>
<li>Adding Webpack to your Rails project</li>
<li>Setting up Webpack</li>
<li>Using Webpack to build your client and server bundles</li>
<li>Installing React and ReactDOM via NPM</li>
<li>Adding Webpack bundles to the Rails asset pipeline</li>
</ol>

<h3 id="step-1-adding-webpack-to-your-rails-project">Step 1 - Adding Webpack to your Rails project</h3>

<p>Run these three commands:</p>

<p><code>npm init</code> will create an empty package.json in your root folder</p>

<p><code>npm install webpack --save-dev</code> install Webpack and create a node_modules folder</p>

<p><code>npm install webpack -g</code> so we can run Webpack from the command line</p>

<p>The commands above will have created a <code>package.json</code> (similar concept to a Gemfile) and a <code>node_modules</code> folder containing hundreds of JavaScript dependancies that we do not need in the source of our project so let&#39;s tell git to ignore them by adding a <code>.gitignore</code> file:</p>
<pre class="highlight plaintext"><code>#/.gitignore
/node_modules
</code></pre>
<h3 id="step-2-setting-up-webpack">Step 2 - Setting up Webpack</h3>

<p>Now that we have Webpack, we need to add 3 boiler plate files to configure it. As you add more JavaScript packages you will be updating these files. Again this is similar to updating your Gemfile when you add new gems to a project.</p>

<p>Add <code>webpack.config.js</code> to the root of your project:</p>
<pre class="highlight javascript"><code><span class="c1">// webpack.config.js</span>
<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"path"</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">context</span><span class="p">:</span> <span class="nx">__dirname</span><span class="p">,</span>
    <span class="na">entry</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">client_only</span><span class="p">:</span>  <span class="s2">"./webpack/client_only.js"</span><span class="p">,</span>
      <span class="na">client_and_server</span><span class="p">:</span> <span class="s2">"./webpack/client_and_server.js"</span>
    <span class="p">},</span>
    <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">path</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">'app'</span><span class="p">,</span> <span class="s1">'assets'</span><span class="p">,</span>   <span class="s1">'javascripts'</span><span class="p">,</span> <span class="s1">'webpack'</span><span class="p">),</span>
      <span class="na">filename</span><span class="p">:</span> <span class="s2">"[name].js"</span><span class="p">,</span>
      <span class="na">publicPath</span><span class="p">:</span> <span class="s2">"/webpack/"</span>
    <span class="p">},</span>
    <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">loaders</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1">// add any loaders here</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="na">resolve</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">root</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">'..'</span><span class="p">,</span> <span class="s1">'webpack'</span><span class="p">)</span>
    <span class="p">},</span>
<span class="p">};</span>
</code></pre>
<p>Then create a folder called webpack and add the following two files:</p>
<pre class="highlight javascript"><code><span class="c1">// webpack/client_only.js</span>
<span class="c1">// any packages that depend specifically on the DOM go here</span>
<span class="c1">// for example the webpack css loader generates code that will break prerendering</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'client_only.js loaded'</span><span class="p">);</span>
</code></pre><pre class="highlight javascript"><code><span class="c1">// webpack/client_and_server.js</span>
<span class="c1">// all other packages that you can run on both server (prerendering) and client go here</span>
<span class="c1">// most well behaved packages can be required here</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'client_and_server.js loaded'</span><span class="p">)</span>
</code></pre>
<h3 id="step-3-using-webpack-to-build-your-client-and-server-bundles">Step 3 - Using Webpack to build your client and server bundles</h3>

<p>Simply run this command:</p>

<p><code>webpack</code></p>

<p>You should see a result something like this:</p>
<pre class="highlight plaintext"><code>Hash: 756a1dc4a11c8fccd0a4
Version: webpack 1.14.0
Time: 55ms
               Asset     Size  Chunks             Chunk Names
client_and_server.js  1.61 kB       0  [emitted]  client_and_server
      client_only.js  1.61 kB       1  [emitted]  client_only
   [0] ./webpack/client_and_server.js 214 bytes {0} [built]
   [0] ./webpack/client_only.js 206 bytes {1} [built]```
</code></pre>
<p>Our <code>client_and_server.js</code> and <code>client_only.js</code> bundles are built and ready to be included in our application. If you look in your <code>app/assets/javascripts/webpack</code> folder you should see the two files there. Note that these bundles are empty at the moment as we have not added any JavaScript components yet. We will do that in Step 6.</p>

<h3 id="step-4-adding-webpack-bundles-to-the-rails-asset-pipeline">Step 4 - Adding Webpack bundles to the Rails asset pipeline</h3>

<p>Finally we need to require these two bundles into our rails asset pipeline.</p>

<p>Edit <code>app/assets/javascripts/application.js</code> and add</p>
<pre class="highlight ruby"><code><span class="sr">//</span><span class="o">=</span> <span class="nb">require</span> <span class="s1">'webpack/client_only'</span>
</code></pre>
<p>Then edit <code>app/views/components.rb</code> and directly after <code>require &#39;hyper-react&#39;</code> add the following two lines:</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'webpack/client_and_server.js'</span>
<span class="nb">require</span> <span class="s1">'reactrb/auto-import'</span>
</code></pre>
<h3 id="step-5-installing-react-and-reactdom">Step 5 - Installing React and ReactDOM</h3>

<p>This step is really simple as we have NPM installed. Just run these two commands:</p>

<p><code>npm install react --save</code> to install React
<code>npm install react-dom --save</code> to install ReactDOM</p>

<p>Note how this modifies your &#39;package.json&#39; and installs React and ReactDOM in your <code>node_modules</code> folder.</p>

<p>Next we need to <code>require</code> them into <code>client_and_server.js</code>:</p>
<pre class="highlight javascript"><code><span class="c1">// webpack/client_and_server.js</span>
<span class="nx">ReactDOM</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'react-dom'</span><span class="p">)</span>
<span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'react'</span><span class="p">)</span>
</code></pre>
<p>And finally we need to run <code>webpack</code> to add them to the bundle:</p>
<pre class="highlight plaintext"><code>webpack
</code></pre>
<p>The output should look something like this:</p>
<pre class="highlight plaintext"><code>Hash: db338e21dcc44f66e5b5
Version: webpack 1.14.0
Time: 737ms
               Asset     Size  Chunks             Chunk Names
client_and_server.js   740 kB       0  [emitted]  client_and_server
      client_only.js  1.61 kB       1  [emitted]  client_only
   [0] ./webpack/client_and_server.js 271 bytes {0} [built]
   [0] ./webpack/client_only.js 206 bytes {1} [built]
    + 177 hidden modules
</code></pre>
<p>Note that <code>client_and_server.js</code> has gone from 1.61kB to 740kB as it now includes the source of React and ReactDOM.</p>

<h2 id="usage">Usage</h2>

<p>Now that we have completed the setup, using NPM and Webpack to include new JavaScript components is simply a case of running Step 6 again for each component you would like to add. You simply follow these three steps:</p>

<ol>
<li>Install the component using NPM <code>npm install xx --save</code></li>
<li><code>require</code> the component into either <code>webpack/client_and_server.js</code> or <code>webpack/client_only.js</code></li>
<li>Run the <code>webpack</code> command to rebuild your bundles</li>
</ol>

<p>Adding a components via NPM and then making it accessible to HyperReact as a Ruby class really is that simple.</p>

<h2 id="example">Example</h2>

<p>To complete this tutorial, let&#39;s install a JavaScript React component and use it in HyperReact.</p>

<p>We are going to use <a href="https://github.com/CookPete/rplayr">Pete Cook’s React rplayr</a> to play a YouTube video.</p>

<p>First let’s install the component via NPM:</p>
<pre class="highlight plaintext"><code>npm install react-player --save
</code></pre>
<p>Next we need to <code>require</code> it in <code>webpack/client_and_server.js</code></p>
<pre class="highlight javascript"><code><span class="c1">// webpack/client_and_server.js</span>
<span class="nx">ReactPlayer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'react-player'</span><span class="p">)</span>
</code></pre>
<p>Then run <code>webpack</code> so it can be bundled</p>
<pre class="highlight plaintext"><code>webpack
</code></pre>
<p>And then finally let’s use it while rendering a HyperReact component:</p>
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">render</span>
  <span class="n">div</span> <span class="k">do</span>
    <span class="no">ReactPlayer</span><span class="p">(</span><span class="ss">url:  </span><span class="s1">'https://www.youtube.com/embed/FzCsDVfPQqk'</span><span class="p">,</span>
      <span class="ss">playing: </span><span class="kp">true</span>
    <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
        </div>
      </div>
    </div>

    <div class="page-footer-upperline">
      <div class="container">

      </div>
    </div>

    <footer class="nav-footer">
  <section class="sitemap">

    <a href="/" class="nav-home"></a>

    <div>
      <h6><a href="/start/components" class="hyperloop-white">Start</a></h6>
      <a href="/start/components">Components</a>
      <a href="/start/stores">Stores</a>
      <a href="/start/models">Models</a>
      <a href="/start/operations">Operations</a>
      <a href="/start/policies">Policies</a>
      <a href="/start/pragmatic">Pragmatic Thinking</a>
    </div>
    <div>


      <h6><a href="/tutorials" class="hyperloop-white">Tutorials</a></h6>
      <a href="/tutorials/hyperloopcomps">Hyperloop COMPS</a>
      <a href="/tutorials/hyperloopjs">Hyperloop.js</a>
      <a href="/tutorials/hyperlooprails">Hyperloop and Rails</a>
      <a href="/tutorials/hyperloopdeploy">Hyperloop deployment</a>
      <a href="/tutorials/opal">Opal</a>
      <a href="/tutorials/videos">Videos</a>
    </div>
    <div>
      <h6><a href="/installation" class="hyperloop-white">Installation</a></h6>
      <a href="/installation#opal-playground">Hyperloop.js</a>
  	  <a href="/installation#ror">With Ruby On Rails</a>
  	  <a href="/installation#with-sinatra">With Sinatra</a>
  	  <a href="/installation#deployment">Deployment</a>
    </div>
    <div>
      <h6><a href="/gems" class="hyperloop-white">Gems</a></h6>
      <a href="https://github.com/ruby-hyperloop/hyperloop">hyperloop</a>
      <a href="https://github.com/ruby-hyperloop/hyperloop-js">hyperloop-js</a>
      <a href="https://github.com/ruby-hyperloop/hyper-react">hyper-component</a>
      <a href="https://github.com/ruby-hyperloop/hyper-store">hyper-store</a>
      <a href="https://github.com/ruby-hyperloop/hyper-mesh">hyper-model</a>
      <a href="https://github.com/ruby-hyperloop/hyper-operation">hyper-operation</a>
      <a href="https://github.com/ruby-hyperloop/reactrb-router/tree/v2-4-0">hyper-router</a>
      <a href="https://github.com/ruby-hyperloop/hyper-spec">hyper-spec</a>
      <a href="https://github.com/ruby-hyperloop/hyper-trace">hyper-trace</a>
    </div>
    <div>
      <h6><a href="/tools" class="hyperloop-white">Tools</a></h6>
      <a href="#testing">Testing</a>
    	<a href="#tools">Tools</a>
    	<a href="#debugging">Debugging</a>
    </div>
    <div>
      <h6><a href="/docs/architecture" class="hyperloop-white">Docs</a></h6>
      <a href="/docs/architecture">Architecture</a>
      <a href="/docs/components/docs#components-dsl-overview">Components</a>
      <a href="/docs/stores/docs">Stores</a>
      <a href="/docs/models/docs">Models</a>
      <a href="/docs/operations/docs">Operations</a>
      <a href="/docs/policies/docs">Policies</a>
    </div>

  </section>

  <section class="otherlinks">
    <a href="https://github.com/ruby-hyperloop" class="hyperloop-white">Github</a>
    <a href="/support" class="hyperloop-white">Help</a>
    <a href="/blog" class="hyperloop-white">Blog</a>
  </section>

  <section class="copyright">
    Copyright © 2018 Hyperloop.
  </section>
</footer>


    <script>
      (function(Opal) {
        var self = Opal.top, $scope = Opal, nil = Opal.nil, $breaker = Opal.breaker, $slice = Opal.slice;
        Opal.add_stubs(['$puts']);
        return self.$puts("Opal ok")
      })(Opal);
    </script>

    <!-- <script   src="http://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script> -->


    <script type="text/ruby">puts "Hyperloop JS ok"</script>




  </body>
</html>
